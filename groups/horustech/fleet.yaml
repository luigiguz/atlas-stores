# Grupo de despliegue: Horustech
# Despliega: Horustech + Core + BD + Cloudflared
# Para tiendas que usan el sistema Horustech
#
# NOTA: Este grupo es un template genérico. Para cada tienda, crea un bundle específico
# en stores/<nombre-tienda>/fleet.yaml que referencia sus propios archivos de valores.
#
# Este archivo puede usarse como fallback o para configuraciones globales de Horustech.

defaultNamespace: poslite

targetCustomizations:
- name: horustech-db
  clusterSelector:
    matchLabels:
      atlas: "true"
      poslite: "horustech"
  helm:
    chart: oci://atlashelmrepo.azurecr.io/helm/poslite-db
    version: 1.0.0
    values:
      persistence:
        storageClass: local-path

- name: horustech-core
  clusterSelector:
    matchLabels:
      atlas: "true"
      poslite: "horustech"
  helm:
    chart: oci://atlashelmrepo.azurecr.io/helm/poslite-core
    version: 1.0.0
    values:
      portal:
        enabled: true
      webapi:
        enabled: true

- name: horustech-app
  clusterSelector:
    matchLabels:
      atlas: "true"
      poslite: "horustech"
  helm:
    chart: oci://atlashelmrepo.azurecr.io/helm/poslite-horustech
    version: 1.0.0

- name: horustech-cloudflared
  clusterSelector:
    matchLabels:
      atlas: "true"
      poslite: "horustech"
  helm:
    chart: oci://atlashelmrepo.azurecr.io/helm/poslite-cloudflared
    version: 1.0.0
    values:
      replicas: 1
      hostNetwork: true
