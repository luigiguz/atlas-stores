# Grupo de despliegue: Pilot
# Tiendas en fase piloto de migración

defaultNamespace: poslite

targetCustomizations:
- name: pilot-stores
  clusterSelector:
    matchLabels:
      atlas: "true"
      wave: "pilot"
  helm:
    # Referencia al chart desde Helm Repository (ACR OCI)
    repo: oci://atlashelmrepo.azurecr.io/helm
    chart: poslite-db
    version: 1.0.0
    values:
      # Valores específicos del grupo pilot
      postgresql:
        timezone: "America/Panama"
      persistence:
        storageClass: local-path

- name: pilot-core
  clusterSelector:
    matchLabels:
      atlas: "true"
      wave: "pilot"
  helm:
    repo: oci://atlashelmrepo.azurecr.io/helm
    chart: poslite-core
    version: 1.0.0
    values:
      portal:
        enabled: true
      webapi:
        enabled: true

- name: pilot-cloudflared
  clusterSelector:
    matchLabels:
      atlas: "true"
      wave: "pilot"
  helm:
    repo: oci://atlashelmrepo.azurecr.io/helm
    chart: poslite-cloudflared
    version: 1.0.0
    values:
      replicas: 1
      hostNetwork: true
