defaultNamespace: poslite
targetCustomizations:
- name: db
  clusterSelector:
    matchLabels:
      atlas: "true"
      store: "tienda-core-ejemplo"
  helm:
    chart: poslite-db
    repo: oci://atlashelmrepo.azurecr.io/helm
    version: 1.0.0
    values:
      postgresql:
        timezone: "America/Panama"
        database: poslite
        user: sa
      persistence:
        enabled: true
        storageClass: local-path
        size: 20Gi
        accessMode: ReadWriteOnce
      pgadmin:
        enabled: true
        defaultEmail: admin@admin.com
- name: core
  clusterSelector:
    matchLabels:
      atlas: "true"
      store: "tienda-core-ejemplo"
  helm:
    chart: poslite-core
    repo: oci://atlashelmrepo.azurecr.io/helm
    version: 1.0.0
    values:
      portal:
        enabled: true
      webapi:
        enabled: true
      workers:
        price:
          enabled: true
        shift:
          enabled: true
        errorReports:
          enabled: true
        ierp:
          enabled: true
- name: cloudflared-core
  clusterSelector:
    matchLabels:
      atlas: "true"
      store: "tienda-core-ejemplo"
  helm:
    chart: poslite-cloudflared-core
    repo: oci://atlashelmrepo.azurecr.io/helm
    version: 1.0.0
    values:
      replicas: 1
      hostNetwork: true
      config:
        tunnelId: ""
        credentialsFile: ""
        ingress:
          - hostname: tienda-core-ejemplo-10014.asptienda.com
            service: http://localhost:10014
          - hostname: tienda-core-ejemplo-10012.asptienda.com
            service: http://localhost:10012
          - hostname: tienda-core-ejemplo-5050.asptienda.com
            service: http://localhost:5050
          - hostname: tienda-core-ejemplo-5432.asptienda.com
            service: tcp://localhost:5432
          - service: http_status:404
